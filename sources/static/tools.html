<!DOCTYPE html PUBLIC "html">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<link media="screen" href="webinos-apis.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="webinos-apis.js"></script>
<title>Device APIs - Tools</title>
</head>
<body id="content">
<div class="api">
     <a href="http://webinos.org"><img src="webinosLogo.png" alt="Webinos Logo"></a>

     <h1 class="head">Device APIs - Tools</h1>
     <h3>June 2011</h3>
     </div><p class="copyright"><small>Â© 2011 webinos consortium, www.webinos.org.</small></p></div>
</div>
<hr> 
<h2>Abstract</h2> 

<div class="brief"> 
<p> 
This document describes the tools assessed and used for Webinos APIs specification. 
</p>
</div> 

<h2>Status</h2> 

<div class="brief"> 
<p> 
First draft for initial discussion. 
</p>
</div> 

<div class="toc">
<h2>Table of Contents</h2> 
<dl>
<dt><span class="section"><a href="#introduction">1 - Introduction</a></span> </dt>
<dt><span class="section"><a href="#available">2 - Available Tools</a></span> </dt>
<dt><span class="section"><a href="#toolchain">3 - Webinos Toolchain</a></span> </dt>
</dl>

<div class="section" lang="en">
<h2 class="title" style="clear: both;"><a name="introduction"></a>1 - Introduction</h2>
<p>This document describes the tools for API specification that Webinos project assessed and the toolchain that Webinos has put in place to ease and automate the API specification work.</p>
</div>

<div class="section" lang="en">
<h2 class="title" style="clear: both;"><a name="available"></a>2 - Available Tools</h2>


<div class="section" lang="en">
<h3 class="title" style="clear: both;"><a name="widlproc"></a>2.1 - Widlproc</h3>

<p>WAC and BONDI API specifications were mostly created using a toolchain that converts annotated WebIDL files into HTML documentation.</p>

<p>API Authors edit a WebIDL file in which additional information is included through comments following a similar syntax to Doxygen. These Doxygen-like comments provide information about the meaning of the interfaces, attributes, methods and input arguments. Futhermore, some security aspects (e.g. which methods are security sensitive) can be also documented through appropriate keywords. Detailed information about the supported syntax is available at: <a href="http://widl.webvm.net/svn/widlproc/trunk/doc/widlproc.html"> Aplix Website</a>.</p>

<p>The annotated WebIDL (also known as widl) can be converted through the widlproc tool into an XML file. The widlproc tool is an opensource tool developed by Aplix that is licensed through Apache 2. The source code is also available at <a href="http://widl.webvm.net/svn/widlproc/trunk/"> a repository </a> hosted by Aplix.</p>

<p>The XML file generated by widlproc can then be converted through an XSL into an HTML file with customised styling based on CSS. Two different styles created based in similar widl can be found at:</p>

<ul><li><a href="http://bondi.omtp.org/1.1/apis/devicestatus.html"> BONDI Device Status </a></li>
<li><a href="http://specs.wacapps.net/wac2_0/feb2011/deviceapis/devicestatus.html"> WAC Device Status </a></li></ul>

<p>This approach is quite flexible and scriptable: e.g. it is very easy to create scripts that process many widls and based on that auto-generates the documentation. For instance, in WAC we have some hooks in SVN that update the documentation every time a widl is committed to the database. Additionally, Webinos could create their own spec Look&Feel by tweaking the XSL and CSS used for HTML generation and styling.</p>

<p>As an XML is generated in the intermediate step, it should be relative easy to create the documentation in alternative formats to HTML (e.g. ePub or PDF). Alternatively, that XML could be also used for generating the stubs of the code for the API implementation or for generating SDK plugins.</p>

<p>Some drawbacks of this toolchain:</p>

<ul>
<li>The doxygen comments only supported a limited set of HTML tags, which restricts a bit the richness of the documentation that can be included. E.g. the img tag is not currently supported.</li>
<li>The WebIDL spec in which it is based on, it is outdated (2009), although the amount of changes since that version are not that significant (at least from a syntactical point of view).</li>
<li>Is not exactly a wysiwyg tool. There are many differences between what you see and what you get.</li>
</ul>
<p>However, if Webinos believe this toolchain is the right way forward, the two first drawbacks could be overcome as Webinos have access to the source code. Furthermore, Webinos could also contribute back any improvements made in the wildproc tool to the community.</p>
</div>


<div class="section" lang="en">
<h3 class="title" style="clear: both;"><a name="respec"></a>2.2 - Respec.js</h3>
<p>ReSpec is a Javascript based tool created by Robin Berjon that allows editors to write a specification focusing on the actual features and correctness, while needing to pay as little attention as possible to issues pertaining to styling. This tool allows spec editors to edit directly an HTML file that should make use of the Respec.js script library. When the HTML is rendered by a browser, the appropriate styling is applied by Respec.js.</p>

<p> The documentation for this tool is available at <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html"> W3C site</a></p>

<p>Although this mechanism is useful when editing the spec, when it is ready for publication, the tool also allows to save a snapshot of the spec with no scripting at all, so it is a "static" HTML page.</p>

<p>This tool has been mostly used in the W3C DAP API Specs, for instance <a href="http://dev.w3.org/2009/dap/messaging/"> the messaging API</a>.</p>

<p>The source code is publicly available and is licensed through <a href="http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231"> W3C License </a>.</p>

<p>A new version of ReSpec (ReSpec2) is also in development and is supposed to offer a more modular approach, making it more customizable.</p>
</div>

<div class="section" lang="en">
<h3 class="title" style="clear: both;"><a name="checkers"></a>2.3 - Checkers</h3>

<p>During BONDI development, it was acknowledged that apart from enforcing WebIDL syntax, further checkings should be done in the specification, for instance:</p>
<ul>
<li>Ensuring that all the input arguments are document in the widl prose.</li>
<li>Check that all the data types used are either primitive data types or defined in the module or included modules.</li>
<li>Ensure that all the security sensitive methods are asynchronous</li>
<li>...</li>
</ul>
<p>In order to do it, ACCESS created a tool based on PHP that extracted the code from the same widls used in conjunction to widlproc to populate a database. The information of database was processed for two different purposes:</p>
<ul>
<li> Create some checkers that highlighted problems in the spec.</li>
<li> Generate (yet) another version of the API documentation.</li>
<li> Unfortunately the tool was not open source and ACCESS is not involved in WAC anymore, but we can still have a look at the results created by the tool, for instance at the <a href="http://bondi01.obe.access-company.com/1_1_5775_146/"> in the ACCESS site </a></li>
</ul>
<p>The W3C WebIDL checker takes a similar approach, and allows to extract WebIDL fragments from HTML pages, and run in addition to syntactic checks a set of more advanced checks as defined by the prose of the WebIDL specification.</p>

<p>The WebIDL checker builds upon widlproc through an open-source Python script.</p>
</div>

<div class="section" lang="en">
<h2 class="title" style="clear: both;"><a name="toolchain"></a>3 - Webinos Toolchain</h2>
<p> All the initiatives that are defining EcmaScript APIs are using WebIDL, Webinos decided to follow the same approach and use WebIDL to specify the interfaces.</p>
<p> With regards to the authoring tool for creating the specification, a wildproc toolchain similar to what was used by WAC and BONDI was seleced as the preferred way forward. </p>
<p> Webinos has already made contributions to widlproc repository in order to support the latest Webidl drafts so that the Webinos could write their specifications using the latest available WebIDL versions.</p> 
<p> Based in the updated widlproc tool, Webinos has implemented a toolchain that gets all the annotated WebIDL from a git repository, processes them and creates a set of API specifications that are made publicly available at <a href="http://dev.webinos.org/specifications/draft/"> the Webinos API Specification Home Page </a> </p>
</div>

</body>
